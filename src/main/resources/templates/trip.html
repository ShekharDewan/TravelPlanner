<!DOCTYPE html>
<html lang="en">

<head th:replace="header :: header">...</head>	

<body>
    <nav class="light-blue lighten-1" role="navigation">
        <div class="nav-wrapper container"><a id="logo-container" href="/" class="brand-logo">Trip Planner</a>
            <ul class="right hide-on-med-and-down">
                <li><a href="/trips">Trips</a></li>
                <li><a href="/h2" target="_blank">Database</a></li>
            </ul>

            <ul id="nav-mobile" class="sidenav">
                <li><a href="#">Navbar Link</a></li>
            </ul>
            <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
        </div>
    </nav>
    <div class="section no-pad-bot" id="index-banner">
        <div class="container">
            <br><br>
            <div class="title">
                <h1 class="header center orange-text" th:text="${trip.title}"></h1>
                <span id="titlecontainer">
                <span class="remain">
                  <script th:inline="javascript">
                  	/*<![CDATA[*/
                  	var begin = /*[[${trip.start}]]*/ 'default';
                  	/*]]>*/      
                  </script>
                  <script type="text/javascript" th:src="@{/jsp/daysuntil.js}"></script>
                  </span>
                 <span class="duration">
                  <script th:inline="javascript">
                  	/*<![CDATA[*/
                  	var begin = /*[[${trip.start}]]*/ 'default';
                  	var conclude = /*[[${trip.end}]]*/ 'default';
                  	/*]]>*/      
                  </script>
                  <script type="text/javascript" th:src="@{/jsp/triplength.js}"></script>
                  </span>
                </span>
                <a th:href="@{/trip/} + ${trip.id} + @{/edit}" class="btn-floating blue tooltipped" data-position="bottom" data-tooltip="Edit Trip"><i class="material-icons">edit</i></a>
                
            </div>
            <div class="row center">
                <h6 th:text="${trip.description}" class="header col s12 light"></h6>
                 <h6 th:if="${trip.destinations != null && !trip.destinations.isEmpty() }" th:text= "'Destinations: '+${trip.destinations}" class="header col s12 light"></h6>
                <p th:text="${trip.notes}" class="header col s12 light"></p>
            </div>

            <!-- Page Layout here -->

            <div class="row">

                <div class="col s4">
                    <h4 class="header">
                        <span data-target="modal1" class="btn-floating red"><i class="material-icons">perm_contact_calendar</i></span>
                        Itineraries
                        <a class="btn-floating btn-medium waves-effect waves-light red right tooltipped" data-position="bottom" data-tooltip="Add Itinerary" th:href="@{'/trip/' + ${trip.id} + '/itinerary/add' }"><i
                                class="material-icons">add</i></a>
                    </h4>
                    <br>
                    <ul class="collapsible">
                        <li th:each="itinerary : ${trip.itineraries}">
                            <div class="collapsible-header">
                                <i class="material-icons">perm_contact_calendar</i>
                                <span th:text="${#dates.format(itinerary.date, 'MMM dd, yyyy')}"></span>
                                <span class="icons"><a th:href="@{/trip/} + ${trip.id} + @{/itinerary/delete/} + ${itinerary.id}" class="secondary-content"
                                method="delete"><i class="small material-icons">delete</i></a>
                                <span class="editicon">
                                <a th:href="@{/trip/} + ${trip.id} + @{/itinerary/edit/} + ${itinerary.id}" class="secondary-content">
                                <i class="small material-icons">create</i></a>
                                </span></span>
                            </div>
                            <div class="collapsible-body">
                                <p th:text="${itinerary.notes}"></p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="col s8">
                    <h4 class="header">
                        <span data-target="modal1" class="btn-floating green"><i class="material-icons">hotel</i></span>
                        Accommodations
                        <a class="btn-floating btn-medium waves-effect waves-light red right tooltipped" data-position="bottom" data-tooltip="Add Accommodation" th:href="@{'/trip/' + ${trip.id} + '/accommodation/add' }"><i
                                class="material-icons">add</i></a>
                                
                                               
                                
                                
                    </h4>
                    <br>
                    <ul class="collapsible">
                        <li th:each="accommodation : ${trip.accommodations}">
                            <div class="collapsible-header">
                                <i class="material-icons">hotel</i>
                                <span  th:text="${accommodation.title}"></span>
                                <span class="badge" th:text="${#dates.format(accommodation.checkIn, 'MMM dd, yyyy')}">4</span>
                                <span class="iconsright"><a th:href="@{/trip/} + ${trip.id} + @{/accommodation/delete/} + ${accommodation.id}" class="secondary-content"
                                method="delete"><i class="small material-icons">delete</i></a>
                                <span class="editicon">
                                <a th:href="@{/trip/} + ${trip.id} + @{/accommodation/edit/} + ${accommodation.id}" class="secondary-content"><i class="small material-icons">create</i></a>
                                </span></span>
                            </div>
                            <div class="collapsible-body">

                                <p th:text="${accommodation.notes}"></p>
                                check-in: <span th:text="${#dates.format(accommodation.checkIn, 'MMM dd, yyyy')}" />&nbsp;
                                <br>check-out: <span th:text="${#dates.format(accommodation.checkOut, 'MMM dd, yyyy')}" /><br>
                                <h6>$ <span th:if="${accommodation.price != null}" th:text="${#numbers.formatDecimal(accommodation.price, 0, 'COMMA', 2, 'POINT')}">10.00</span></h6>
                                
                                
                                <br>
                                <address>
                                    <span  th:text="${accommodation.address.civicNumber}" />&nbsp;<span th:text="${accommodation.address.street}" /><br>
                                    <span  th:text="${accommodation.address.city}" />&nbsp;<span th:text="${accommodation.address.province}" />&nbsp;<span th:text="${accommodation.address.country}" /><br>
                                    <span th:text="${accommodation.address.code}" /><br>
                                     
                                    <span th:if="${accommodation.address.latitude!=null}" th:text="${accommodation.address.latitude}" />
                                    &nbsp;
                                    <span th:text="${accommodation.address.longitude}" /><br>
                                    
                                    <div th:if="${accommodation.address.latitude!=null && accommodation.address.longitude!=null}" style="width:100%;height:300px;" th:id="@{'accommodation-map-' + ${accommodation.id}}"></div>
                                    <script th:inline="javascript">
                                        /*<![CDATA[*/
                                        var map;
                                        function initAccomMap[[${ accommodation.id }]]() {
                                            map = new google.maps.Map(document.getElementById('accommodation-map-[[${accommodation.id}]]'), {
                                                center: { lat: [[${ accommodation.address.latitude }]], lng: [[${ accommodation.address.longitude }]] },
                                                zoom: 15
                                            });
                                        }
                                        initAccomMap[[${ accommodation.id }]]();
						                /*]]>*/
                                    </script>
                                </address>

                            </div>
                        </li>
                    </ul>

                    <br>

                    <h4 class="header">
                        <span data-target="modal1" class="btn-floating blue"><i class="material-icons">whatshot</i></span>
                        Reservations
                        <a class="btn-floating btn-medium waves-effect waves-light red right tooltipped" data-position="bottom" data-tooltip="Add Reservation" th:href="@{'/trip/' + ${trip.id} + '/reservation/add' }"><i
                                class="material-icons">add</i></a>
                    </h4>
                    <br>
                    <ul class="collapsible">
                        <li th:each="reservation : ${trip.reservations}">
                            <div class="collapsible-header">
                                <i class="material-icons">whatshot</i><span th:text="${reservation.title}"></span>
                                <span class="badge" th:text="${#dates.format(reservation.date, 'MMM dd, yyyy')}">4</span>
                                <span class="iconsright"><a th:href="@{/trip/} + ${trip.id} + @{/reservation/delete/} + ${reservation.id}" class="secondary-content"
                                method="delete"><i class="small material-icons">delete</i></a>
                                <span class="editicon">
                                <a th:href="@{/trip/} + ${trip.id} + @{/reservation/edit/} + ${reservation.id}" class="secondary-content"><i class="small material-icons">create</i></a>
                                </span></span>

                            </div>
                            <div class="collapsible-body">
                                <p th:text="${reservation.notes}"></p>
                                Confirmation: <span th:text="${reservation.confirmation}"></span>
                               	<h6 th:text=" ${reservation.reserveTime}"></h6>
                                <h6 th:if="${reservation.price != null}" th:text="@{'$' +  ${reservation.price}}"></h6>
                                <address>
                                    <span th:text="${reservation.address.civicNumber}" />&nbsp;<span th:text="${reservation.address.street}" /><br>
                                    <span th:text="${reservation.address.city}"/>&nbsp;<span th:text="${reservation.address.province}" />&nbsp;<span th:text="${reservation.address.country}" /><br>
                                    <span th:text="${reservation.address.code}" /><br>      
                                    &nbsp;<span th:text="${reservation.address.latitude}" />&nbsp;<span
                                        th:text="${reservation.address.longitude}" /><br>
                                    <div th:if="${accommodation.address.latitude!=null && accommodation.address.longitude!=null}" style="width:100%;height:300px;" th:id="@{'map-' + ${reservation.id}}"></div>
                                    <script th:inline="javascript">
                                        /*<![CDATA[*/
                                        var map;
                                        function initMap[[${ reservation.id }]]() {
                                            map = new google.maps.Map(document.getElementById('map-[[${reservation.id}]]'), {
                                                center: { lat: [[${ reservation.address.latitude }]], lng: [[${ reservation.address.longitude }]] },
                                                zoom: 15
                                            });
                                        }
                                        initMap[[${ reservation.id }]]();
							            /*]]>*/
                                    </script>
                                </address>
                            </div>
                        </li>
                    </ul>
                </div>

            </div>
            <br><br>
        </div>
    </div>
    
    <a th:href="@{/trip/} + ${trip.id} + '/print'" id="stickylink"><i class="material-icons">print</i></a>

<div th:replace="footer :: footer">...</div>


    <!--  Scripts-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="/js/materialize.js"></script>
    <script src="/js/init.js"></script>

</body>

</html>
